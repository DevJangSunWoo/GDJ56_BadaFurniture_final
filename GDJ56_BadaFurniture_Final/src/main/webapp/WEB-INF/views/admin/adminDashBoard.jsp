<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>

<c:set var="path" value="${pageContext.request.contextPath}"/>
<link rel="stylesheet" href="${path }/resources/css/admin/adminDashBoard.css"/>

<!-- chart.js ÎùºÏù¥Î∏åÎü¨Î¶¨ CDN Î°úÎìú -->    
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.0/chart.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.0/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

<jsp:include page="/WEB-INF/views/common/adminHeader.jsp"/>
<style>
    hr {
        border: 0px;
    }
</style>
<section>
    <div id="divTop">
        <div id="title_container">            
            <h1>üîµ Í¥ÄÎ¶¨Ïûê ÎåÄÏãúÎ≥¥Îìú üîµ</h1>
        </div>        
    </div>

    <div id="divMidOuter">    
        <div id="divMid">
            <div id="order_container">
                <h3 class="title">üí∞ Ï£ºÎ¨∏ ÌòÑÌô©</h3>
                <div class="spandiv">                

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ï†ÑÏ≤¥</strong></div>
                        <div class="valueDiv"><c:out value="${summary.ALL_ORDER}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>                     
                    <hr>
                    <hr>
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏûÖÍ∏àÎåÄÍ∏∞</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_1}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div> 

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏûÖÍ∏àÏôÑÎ£å</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_2}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>    
                    <hr>
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ïπ¥ÎìúÍ≤∞Ï†ú</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_3}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>    

                </div>            
            </div>
            
            <div id="delivery_container">
                <h3 class="title">üöö Î∞∞ÏÜ° ÌòÑÌô©</h3>
                <div class="spandiv">

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Î∞∞ÏÜ°ÎåÄÍ∏∞</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_4}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>   

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Î∞∞ÏÜ°Ï§ë</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_5}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>  

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Î∞∞ÏÜ°ÏôÑÎ£å</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_6}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>  
                </div>            
            </div>
           
            <div id="orderDetail_container">
                <h3 class="title">üõí Ï∑®ÏÜå/Î∞òÌíà ÌòÑÌô©</h3>
                <div class="spandiv">                                    

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ï†ÑÏ≤¥</strong></div>
                        <div class="valueDiv"><c:out value="${summary.ALL_REFUND}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div> 
                    <hr>
                    <hr>
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ï∑®ÏÜåÏöîÏ≤≠</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_7}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div> 
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ï∑®ÏÜåÏôÑÎ£å</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_8}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div> 

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ï∑®ÏÜåÍ±∞Î∂Ä</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_9}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div> 
                    <hr>
                    <hr>
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Î∞òÌíàÏöîÏ≤≠</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_10}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div> 

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Î∞òÌíàÎåÄÍ∏∞</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_11}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Î∞òÌíàÍ±∞Î∂Ä</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_12}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                </div>            
            </div>
            <div id="product_container">
                <h3 class="title">üéÅ ÏÉÅÌíà ÌòÑÌô©</h3>
                <div class="spandiv">

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ï†ÑÏ≤¥</strong></div>
                        <div class="valueDiv"><c:out value="${summary.ALL_PRODUCT}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>
                    <hr>
                    <hr>
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÌåêÎß§Ï§ë</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_13}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Í±∞ÎûòÏ§ë</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_14}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÌåêÎß§ÏôÑÎ£å</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_15}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>                    
                    <hr>
                    <hr>
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Í≥µÍ∞ú</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_16}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÎπÑÍ≥µÍ∞ú</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_17}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>
                </div>
            </div>
            <div id="resell_container">
                <h3 class="title">ü§ù 'ÎÇ¥ Í∞ÄÍµ¨ ÌåîÍ∏∞' ÌòÑÌô©</h3>
                <div class="spandiv">

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>Ï†ÑÏ≤¥</strong></div>
                        <div class="valueDiv"><c:out value="${summary.ALL_RESELL}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>
                    <hr>
                    <hr>
                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏäπÏù∏Í≤ÄÌÜ†</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_18}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏàòÏ†ïÏöîÏ≤≠</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_19}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏäπÏù∏ÏôÑÎ£å</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_20}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏäπÏù∏Í±∞Î∂Ä</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_21}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏàòÍ±∞ÎåÄÍ∏∞</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_22}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏàòÍ±∞ÏôÑÎ£å</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_23}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>

                    <div class="stateOuterDiv">
                        <div class="itemDiv"><strong>ÏûÖÍ∏àÏôÑÎ£å</strong></div>
                        <div class="valueDiv"><c:out value="${summary.STATE_24}"/></div>
                        <div class="unitDiv"><strong>Í±¥</strong></div>
                    </div>
                </div>
            </div>
        </div>   
    </div>
    <hr>
    <div id="divBot">
        <div class="titleNcanvas" style="margin-right: 7%;margin-left: 3%;">
            <h3 class="title">Ï£ºÎ¨∏Ïàò/Îß§Ï∂úÏï°</h3>
            <canvas id="orderNsales" width="600" height="400"></canvas>    

        </div>

        <div class="titleNcanvas" >
            <h3 class="title">ÏÉÅÌíàÎ≥Ñ Ï£ºÎ¨∏ÏàòÏöî</h3>
            <canvas id="itemDemand" width="400" height="400"></canvas>
        </div>
        
        <div class="titleNcanvas">
            <h3 class="title">ÎÇ¥Í∞ÄÍµ¨ÌåîÍ∏∞ Í∞ÄÍµ¨ÎπÑÏú®</h3>
            <canvas id="resellMine" width="400" height="400"></canvas>
        </div>       

    </div> 

</section>
</body>
</html>
<script>

    //Ï£ºÎ¨∏Ïàò Î∞è Îß§Ï∂úÏï°
    $(()=>{
        $.ajax({
			url: "${path}/admin/chartOrdersSales.do",
			contentType:"application/json;charset=utf-8",
			success:function(result){

                console.log(result.resultOrders);
                console.log(result.resultSales);
                
                var orderData=[];
                orderData.push(result.resultOrders['7ÏùºÏ†Ñ']);
                orderData.push(result.resultOrders['6ÏùºÏ†Ñ']);
                orderData.push(result.resultOrders['5ÏùºÏ†Ñ']);
                orderData.push(result.resultOrders['4ÏùºÏ†Ñ']);
                orderData.push(result.resultOrders['3ÏùºÏ†Ñ']);
                orderData.push(result.resultOrders['2ÏùºÏ†Ñ']);
                orderData.push(result.resultOrders['1ÏùºÏ†Ñ']);
                orderData.push(result.resultOrders['0ÏùºÏ†Ñ']);
     
                var salesData=[];
                salesData.push(result.resultSales['7ÏùºÏ†Ñ']);
                salesData.push(result.resultSales['6ÏùºÏ†Ñ']);
                salesData.push(result.resultSales['5ÏùºÏ†Ñ']);
                salesData.push(result.resultSales['4ÏùºÏ†Ñ']);
                salesData.push(result.resultSales['3ÏùºÏ†Ñ']);
                salesData.push(result.resultSales['2ÏùºÏ†Ñ']);
                salesData.push(result.resultSales['1ÏùºÏ†Ñ']);
                salesData.push(result.resultSales['0ÏùºÏ†Ñ']);

                console.log("Ï£ºÎ¨∏Í±¥ Îç∞Ïù¥ÌÑ∞ :"+orderData);
                console.log("Îß§Ï∂ú Îç∞Ïù¥ÌÑ∞ :"+salesData);

				var resultlabel=['7ÏùºÏ†Ñ','6ÏùºÏ†Ñ','5ÏùºÏ†Ñ','4ÏùºÏ†Ñ','3ÏùºÏ†Ñ','2ÏùºÏ†Ñ','1ÏùºÏ†Ñ','Ïò§Îäò'];			                
               
                new Chart(document.getElementById("orderNsales"), {
                    plugins: [ChartDataLabels],
                    type: 'bar',
                    data: {
                        labels: resultlabel,
                        datasets: 
                            [
                            {
                                label:'Ï£ºÎ¨∏Í±¥Ïàò',
                                yAxisID:'B',
                                data:orderData,                                
                                type:'line',
                                lineTension:0.1,
                                borderColor: '#FFACB7',
                                scaleBeginAtZero: true
                            }
                                ,{ 
                                label:'Îß§Ï∂úÏï°',
                                yAxisID:'A',
                                data: salesData, 
                                backgroundColor: [
                                    '#9DCEFF'

                                    ],
                                scaleBeginAtZero: true
                            }]
                    },
                    options: {
                        responsive:false,
                        title: {
                            display: true,
                            text: 'ÏÉÅÌíàÎ≥Ñ Ï£ºÎ¨∏ÏàòÏöî'
                        },                           
                        datalabels: { // datalables ÌîåÎü¨Í∑∏Ïù∏ ÏÑ∏ÌåÖ
                            formatter: function (value, context) {
                            var idx = context.dataIndex; // Í∞Å Îç∞Ïù¥ÌÑ∞ Ïù∏Îç±Ïä§
            
                            // Ï∂úÎ†• ÌÖçÏä§Ìä∏
                            return context.chart.data.labels[idx] + value;
                            },
                            align: 'top', // ÎèÑÎÑõ Ï∞®Ìä∏ÏóêÏÑú Ìà¥ÌåÅÏù¥ ÏûòÎ¶¨Îäî Í≤ΩÏö∞ ÏÇ¨Ïö©
                        }
                        
                    }
                })        
                                


            }
        })
    })

    //ÎÇ¥Í∞ÄÍµ¨ÌåîÍ∏∞ Í∞ÄÍµ¨ÎπÑÏú®
    $(()=>{
        $.ajax({
			url: "${path}/admin/chartResell.do",
			contentType:"application/json;charset=utf-8",
			success:function(result){

                // console.log(result);
                // console.log(result['ÏùòÏûê']);
                
                var resultData=[];
                resultData.push(result['ÏùòÏûê']);
                resultData.push(result['Ïπ®ÎåÄ']);
                resultData.push(result['ÌôîÏû•ÎåÄ']);
                resultData.push(result['Ï±ÖÏÉÅ']);
                resultData.push(result['Ïò∑Ïû•']);
                resultData.push(result['ÏÜåÌåå']);
                resultData.push(result['Ï±ÖÏû•']);
                resultData.push(result['ÏÑúÎûçÏû•']);

                //console.log(resultData);
                

				var resultlabel=["ÏùòÏûê","Ïπ®ÎåÄ","ÌôîÏû•ÎåÄ","Ï±ÖÏÉÅ","Ïò∑Ïû•","ÏÜåÌåå","Ï±ÖÏû•","ÏÑúÎûçÏû•"];					


                //Ï∞®Ìä∏
                new Chart(document.getElementById("resellMine"), {
                    plugins: [ChartDataLabels],
                    type: 'doughnut',
                    data: {
                        labels: resultlabel,
                        datasets: 
                            [{ 
                                data: resultData, 
                                backgroundColor: [
                                    '#4FC0E8',
                                    '#FFACB7',
                                    '#FB6E52',
                                    '#ED5466',
                                    '#9DB6FF',
                                    '#8CC051',
                                    '#AC92ED',
                                    '#36BC9B'

                                    ],
                                borderWidth: 0,
                                scaleBeginAtZero: true,
                                fill: true
                            }]
                    },
                    options: {
                        responsive:false,	//Ï∞®Ìä∏ ÌÅ¨Í∏∞ Ï°∞Ï†ïÏö©
                        title: {
                            display: true,
                            text: 'ÏÉÅÌíàÎ≥Ñ Ï£ºÎ¨∏ÏàòÏöî',
                            datalabels: { // datalables ÌîåÎü¨Í∑∏Ïù∏ ÏÑ∏ÌåÖ
                                formatter: function (value, context) {
                                var idx = context.dataIndex; // Í∞Å Îç∞Ïù¥ÌÑ∞ Ïù∏Îç±Ïä§
                
                                // Ï∂úÎ†• ÌÖçÏä§Ìä∏
                                return context.chart.data.labels[idx] + value;
                                },
                                align: 'top', // ÎèÑÎÑõ Ï∞®Ìä∏ÏóêÏÑú Ìà¥ÌåÅÏù¥ ÏûòÎ¶¨Îäî Í≤ΩÏö∞ ÏÇ¨Ïö©
                            },                           
                        },
                        legend:{
                            display:true,
                            position:'bottom'
                        }


                        
                    }
                })   
                //Ï∞®Ìä∏               
                                


            }
        })
    })

    //ÏÉÅÌíàÎ≥Ñ Ï£ºÎ¨∏ÏàòÏöî
    $(()=>{
        $.ajax({
			url: "${path}/admin/chartDemand.do",
			contentType:"application/json;charset=utf-8",
			success:function(result){

                //console.log(result);
                // console.log(result['ÏùòÏûê']);
                
                var resultData=[];
                resultData.push(result['ÏùòÏûê']);
                resultData.push(result['Ïπ®ÎåÄ']);
                resultData.push(result['ÌôîÏû•ÎåÄ']);
                resultData.push(result['Ï±ÖÏÉÅ']);
                resultData.push(result['Ïò∑Ïû•']);
                resultData.push(result['ÏÜåÌåå']);
                resultData.push(result['Ï±ÖÏû•']);
                resultData.push(result['ÏÑúÎûçÏû•']);

                //console.log(resultData);
                

				var resultlabel=["ÏùòÏûê","Ïπ®ÎåÄ","ÌôîÏû•ÎåÄ","Ï±ÖÏÉÅ","Ïò∑Ïû•","ÏÜåÌåå","Ï±ÖÏû•","ÏÑúÎûçÏû•"];					


                //Ï∞®Ìä∏
                new Chart(document.getElementById("itemDemand"), {
                    plugins: [ChartDataLabels],
                    type: 'doughnut',
                    data: {
                        labels: resultlabel,
                        datasets: 
                            [{ 
                                data: resultData, 
                                backgroundColor: [
                                    '#4FC0E8',
                                    '#FFACB7',
                                    '#FB6E52',
                                    '#ED5466',
                                    '#9DB6FF',
                                    '#8CC051',
                                    '#AC92ED',
                                    '#36BC9B'

                                    ],
                                borderWidth: 0,
                                scaleBeginAtZero: true,
                                fill: true
                            }]
                    },
                    options: {
                        responsive:false,
                        maintainAspectRatio:false,
                        title: {
                            display: true,
                            text: 'ÏÉÅÌíàÎ≥Ñ Ï£ºÎ¨∏ÏàòÏöî',
                            datalabels: { // datalabels ÌîåÎü¨Í∑∏Ïù∏ ÏÑ∏ÌåÖ
                                formatter: function (value, context) {
                                var idx = context.dataIndex; // Í∞Å Îç∞Ïù¥ÌÑ∞ Ïù∏Îç±Ïä§
                
                                // Ï∂úÎ†• ÌÖçÏä§Ìä∏
                                return context.chart.data.labels[idx] + value;
                                },
                                align: 'top', // ÎèÑÎÑõ Ï∞®Ìä∏ÏóêÏÑú Ìà¥ÌåÅÏù¥ ÏûòÎ¶¨Îäî Í≤ΩÏö∞ ÏÇ¨Ïö©
                            },                           
                        }


                        
                    }
                })   
                //Ï∞®Ìä∏               
                                


            }
        })
    })
		

</script>


<jsp:include page="/WEB-INF/views/common/footer.jsp"/>